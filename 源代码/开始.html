<!DOCTYPE html>
<html lang="zh-hans-cn">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>吴淙渊学习的第一个程序——《切换图片》</title>
    <style>
        html,
        body {
            height: 100%;
        }

        html {
            font-size: 25px;
        }

        body {
            margin: 0;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            justify-items: center;
        }

        button {
            font-size: 30px;
            margin-bottom: 1em;
            border-radius: 1000px;
            border-style: solid;
            border-width: 0.2em;
            padding: 0.25em 1.75em;
            width: 20em;
            line-height: 1.5;
            color: #fff;
            border-color: rgb(32, 14, 112);
            background-color: rgb(70, 54, 139);
            cursor: pointer;
        }

        button:hover {
            background-color: rgb(76, 48, 204);
        }

        .应用顶部内容块 {
            z-index: 10;
            flex: 0 0 3.75em;
            height: 3.75em;
            overflow: visible;
        }

        .应用主体内容块 {
            z-index: 1;
            flex: 1 1 auto;
            display: flex;
            flex-direction: row;
            overflow: hidden;
            justify-content: space-between;
            align-items: stretch;
            padding: 0;
        }

        .中央内容块 {
            flex: 1 1 auto;
            display: flex;
            flex-direction: column;
            box-sizing: border-box;
            padding: 1em;
            overflow: hidden;
        }

        .侧边栏 {
            box-sizing: border-box;
            flex: 0 0 8.66em;
            height: 100%;
            overflow: visible;
            z-index: 10;
        }

        article {
            padding: 0.5em;
            margin: 0;
            color: #bbb;
            background-color: #111;
        }

        article > section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 0.5em 0;
            margin: 0;
        }

        article .标题 {
            position: relative;
        }

        article .标题 button {
            position: absolute;
            top: 0;
            right: 0;
            margin: 0 1em;
            width: auto;
        }

        article .说明正文内容块 {
            display: block;
            width: 40em;
            margin: auto;
        }

        article h1 {
            text-align: center;
            font-size: 1.33em;
            margin: 0;
        }

        article p {
            width: 1000px;
            line-height: 1.75;
            margin: 0.5em 0;
            text-indent: 2em;
        }

        .内容之级别标记 {
            position: absolute;
            border-style: solid;
            padding: 0.5em;
            min-width: 3em;
            height: 1em;
            line-height: 1;
            text-align: center;
        }

        .神圣 .内容之级别标记 {
            color: rgb(235, 202, 96);
            border-color: currentColor;
            background-color: rgb(24, 23, 22);
        }

        .高级 .内容之级别标记 {
            color: black;
            border-color: rgb(97, 69, 10);
            background-color: rgb(255, 185, 32);
        }

        .中级 .内容之级别标记 {
            color: white;
            border-color: rgb(170, 57, 57);
            background-color: rgb(223, 40, 40);
        }

        .普通 .内容之级别标记 {
            color: white;
            border-color: rgb(23, 53, 109);
            background-color: rgb(36, 99, 216);
        }

        .中央内容块 .按钮内容块 {
            box-sizing: border-box;
            text-align: center;
            height: 4em;
        }

        .主图内容块之根 {
            flex: 1 1 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-sizing: border-box;
            overflow: hidden;
            margin: 0;
        }

        .主图内容块之根 .中央部分 {
            flex: 1 1 auto;
            display: flex;
            box-sizing: border-box;
            justify-content: center;
            align-items: flex-start;
            margin: auto;
            width: 100%;
            padding: 0;
            overflow: auto;
            background-color: #eee;
        }

        .主图内容块之根 .主图容器 {
            position: relative;
            text-align: center;
            box-sizing: border-box;
            width: 34em;
            padding: 2em;
        }

        .主图内容块之根 img {
            width: 100%;
            display: block;
            margin: auto;
        }

        .主图内容块之根 figcaption {
            flex: 0 0 auto;
            display: block;
            border-width: 0.2em;
            border-style: solid;
            border-radius: 1000px;
            padding: 0.25em 2.5em;
            margin-top: 0.5em;
            color: hsl(35, 50%, 25%);
            border-color: hsl(35, 35%, 56%);
            background-color: hsl(37, 100%, 85%);
        }

        .主图内容块之根 .内容之级别标记 {
            font-size: 1.25em;
            margin: 1em;
            right: 0;
            top: 0;
            border-width: 0.15em;
            border-radius: 0.4em;
            box-shadow: 0.1em 0.1em 0.5em rgba(0, 0, 0, 0.25);
        }

        .历史记录内容块 {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: visible;
            background-color: #444;
        }

        .历史记录内容块 .历史记录总数 {
            font-size: 0.75em;
            position: absolute;
            display: block;
            width: 8.75em;
            right: 100%;
            top: 0;
            margin: 1em 0;
            padding: 0.5em 1em;
            line-height: 1;
            border-radius: 1000px 0 0 1000px;
            background-color: rgb(206, 206, 206);
            white-space: nowrap;
            text-align: right;
        }

        .历史记录总数 em {
            display: inline-block;
            width: 1.5em;
            text-align: right;
            font-style: normal;
        }

        .历史记录内容块 .历史记录列表容器 {
            width: 100%;
            height: 100%;
            overflow-y: scroll;
        }

        .历史记录列表 {
            margin: 0;
            padding: 0.5em 0;
        }

        .历史记录列表 > li {
            list-style: none;
            display: block;
            box-sizing: border-box;
            cursor: pointer;
            padding: 0.5em;
        }

        .历史记录列表 > li.对应图片已在别处呈现 {
            background-color: rgba(255, 181, 71, 0.319);
        }

        .历史记录列表 > li.已选中 {
            background-color: rgb(255, 181, 71);
        }

        .历史记录列表 > li .中央容器 {
            display: block;
            box-sizing: border-box;
            width: 6em;
            height: 6em;
            border-width: 0.2em;
            margin: auto;
            border-style: solid;
            border-color: #999;
            position: relative;
            overflow: visible;
        }

        .历史记录列表 > li.已选中 .中央容器 {
            border-color: rgb(255, 255, 255);
        }

        .历史记录列表 > li:hover .中央容器 {
            border-color: rgb(67, 241, 32);
        }

        .历史记录列表 > li .图像 {
            display: block;
            width: 100%;
            height: 100%;
            background-repeat: no-repeat;
            background-position: top;
            background-size: cover;
        }

        .历史记录列表 > li .内容之级别标记 {
            font-size: 0.5em;
            margin: 0.25em;
            left: 0;
            bottom: 0;
            border-width: 0.2em;
            border-radius: 0.5em;
            box-shadow: 0.1em 0.1em 0.5em rgba(0, 0, 0, 0.25);
        }

        .历史记录列表 > li .删除按钮 {
            font-size: 0.8em;
            display: none;
            width: 1.6em;
            height: 1.6em;
            line-height: 1;
            padding: 0.25em;
            border-width: 0;
            position: absolute;
            top: 0;
            right: 0;
            margin: 0.25em;
            color: white;
            border-color: rgb(155, 7, 7);
            background-color: red;
        }

        .历史记录列表 > li:hover .删除按钮 {
            display: block;
        }
    </style>
</head>
<body>
    <header class="应用顶部内容块">
        <article>
            <section class="标题">
                <h1>吴淙渊学习的第一个程序——《切换图片》</h1>
                <button id="说明的开关按钮">查看说明</button>
            </section>

            <section id="说明正文内容块" class="说明正文内容块" style="display: none;">
                <p>该程序制作始于2022年3月13日夜。其中包含一个按钮和若干图片。但仅显示这些图片之一，而不是统统显示。</p>
                <p>每当用户点击该按钮或该图片时，程序会随机选择一张图片，显示出来。</p>
            </section>
        </article>
    </header>

    <section class="应用主体内容块">
        <aside class="侧边栏"></aside>

        <section class="中央内容块">
            <div class="按钮内容块">
                <button id="切换按钮">点击我，可显示图片</button>
            </div>

            <figure id="主图内容块之根" class="主图内容块之根">
                <div class="中央部分">
                    <div class="主图容器">
                        <img id="主图" src="" alt="">
                        <sup id="主图内容之级别标记" class="内容之级别标记" style="display: none;"></sup>
                    </div>
                </div>
                <figcaption id="主图说明文字" style="display: none;"></figcaption>
            </figure>
        </section>

        <aside class="侧边栏">
            <div class="历史记录内容块">
                <div class="历史记录总数">历史记录条数：<em id="历史记录总数值"></em></div>
                <div class="历史记录列表容器">
                    <ol id="历史记录列表" class="历史记录列表"></ol>
                </div>
            </div>
        </aside>
    </section>

    <script>
        /** @type {T_端端的应用} */
        window.端端的应用 = (function () {
            const 历史记录数量上限 = 12

            const 图片公共路径 = './图片资源/'

            /**
             * @typedef {object} T_主图配置条目
             * @property {number} 命中概率宽度
             * @property {string} 图片文件名
             */

            /**
             * @typedef {Array<T_主图配置条目>} T_主图配置条目之列表
             */

            /** @type {T_主图配置条目之列表} */
            const 所有主图配置的列表 = [
                { 命中概率宽度: 0.1, 图片文件名: '龙龟.png' },

                { 命中概率宽度: 5, 图片文件名: '穆逢春 海斗士 01 海马.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 海斗士 02 海魔女.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 海斗士 03 六面怪.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 海斗士 04 海魔鱼.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 海斗士 05 海幻妖.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 海斗士 06 海皇子.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 海斗士 07 海龙.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 海斗士 08 美人鱼.webp' },

                { 命中概率宽度: 10, 图片文件名: '穆逢春 冥斗士 01 摆渡人.webp' },
                { 命中概率宽度: 10, 图片文件名: '穆逢春 冥斗士 02 法官.webp' },
                { 命中概率宽度: 10, 图片文件名: '穆逢春 冥斗士 03 曼德拉花.webp' },
                { 命中概率宽度: 10, 图片文件名: '穆逢春 冥斗士 04 地妖.webp' },
                { 命中概率宽度: 10, 图片文件名: '穆逢春 冥斗士 05 妖蝶.webp' },
                { 命中概率宽度: 10, 图片文件名: '穆逢春 冥斗士 06 魔鸟.webp' },
                { 命中概率宽度: 10, 图片文件名: '穆逢春 冥斗士 07 巨斧.webp' },
                { 命中概率宽度: 10, 图片文件名: '穆逢春 冥斗士 08 天贵星.webp' },
                { 命中概率宽度: 10, 图片文件名: '穆逢春 冥斗士 09 天哭星.webp' },
                { 命中概率宽度: 10, 图片文件名: '穆逢春 冥斗士 10 法老王.webp' },
                { 命中概率宽度: 10, 图片文件名: '穆逢春 冥斗士 11 天雄星.webp' },
                { 命中概率宽度: 10, 图片文件名: '穆逢春 冥斗士 12 天猛星.webp' },

                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 01 天神.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 02 天后.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 03 冥王.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 04 死神.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 05 睡神.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 06 太阳神.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 07 月神.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 08 战神.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 09 农神.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 10 火神.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 11 厄运女神.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 12 美神.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 13 酒神.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 14 雅典娜.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 15 海皇.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 16 商业之神.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 17 瞬被哈迪斯附身.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 哈迪斯剑.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 雅典娜神盾.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神 雅典娜胜利女神权杖.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 神仆 潘多拉.webp' },

                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 白银 蛇夫座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 白银 天琴座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 白银 天鹰座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 钢铁战士 2.webp' },

                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 01 白羊座（冥）.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 01 牧羊座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 02 金牛座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 02 金牛座（冥）.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 03 双子座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 03 双子座（冥）.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 04 巨蟹座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 04 巨蟹座（冥）.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 05 狮子座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 05 狮子座（冥）.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 06 处女座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 06 处女座（冥）.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 07 天秤座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 07 天秤座（冥）.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 08 天蝎座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 08 天蝎座（冥）.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 09 射手座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 09 射手座（冥）.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 10 摩羯座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 10 摩羯座（冥）.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 11 水瓶座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 11 水瓶座（冥）.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 12 双鱼座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 12 双鱼座（冥）.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 黄金 教皇 史昂（冥）.webp' },

                { 命中概率宽度: 1, 图片文件名: '穆逢春 圣斗士 教皇 匕首.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 青铜 变色龙座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 青铜 独角兽座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 青铜 水蛇座.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 圣斗士 青铜 天狼座.webp' },

                { 命中概率宽度: 3, 图片文件名: '穆逢春 圣斗士 五主角 01 星矢 冥界最终.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 圣斗士 五主角 01 星矢 神圣衣.webp' },
                { 命中概率宽度: 3, 图片文件名: '穆逢春 圣斗士 五主角 02 紫龙 冥界最终.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 圣斗士 五主角 02 紫龙 神圣衣.webp' },
                { 命中概率宽度: 3, 图片文件名: '穆逢春 圣斗士 五主角 03 冰河 冥界最终.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 圣斗士 五主角 03 冰河 神圣衣.webp' },
                { 命中概率宽度: 3, 图片文件名: '穆逢春 圣斗士 五主角 04 瞬 冥界最终.webp' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 圣斗士 五主角 04 瞬 神圣衣.webp' },
                { 命中概率宽度: 3, 图片文件名: '穆逢春 圣斗士 五主角 05 一辉 冥界最终.jpg' },
                { 命中概率宽度: 1, 图片文件名: '穆逢春 圣斗士 五主角 05 一辉 神圣衣.webp' },

                { 命中概率宽度: 5, 图片文件名: '穆逢春 星宫神斗士 01 巨人.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 星宫神斗士 02 野狼.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 星宫神斗士 03 八腿野马.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 星宫神斗士 04 毒魔.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 星宫神斗士 05 琴手.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 星宫神斗士 06 北极虎.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 星宫神斗士 07 双头龙.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 星宫神斗士 08 神仆 希路达.webp' },
                { 命中概率宽度: 5, 图片文件名: '穆逢春 星宫神斗士 09 奥丁.webp' },
            ]

            // -------- 通用的工具 ---------------------------------

            /** @type {typeof document.querySelector} */
            const 查找元素 = document.querySelector.bind(document)

            /** @type {typeof document.createElement} */
            const 创建元素 = document.createElement.bind(document)

            // -------- 控制器定义 ---------------------------------

            /**
             * @typedef {object} T_应用顶部说明内容控制器
             *
             * @property {string} 本实体在日志中的称谓
             *
             * @property {object} 界面元素集
             * @property {HTMLElement} 界面元素集.正文内容块元素
             * @property {HTMLElement} 界面元素集.开关按钮元素
             *
             * @property {() => void} 执行一切准备工作
             * @property {(this: T_应用顶部说明内容控制器, 事件: PointerEvent) => any} $开关按钮元素事件处理程序_click
             */

            /** @type {T_应用顶部说明内容控制器} */
            const 应用顶部说明内容控制器 = {
                本实体在日志中的称谓: '应用顶部说明内容控制器',

                界面元素集: {
                    正文内容块元素: 查找元素('#说明正文内容块'),
                    开关按钮元素: 查找元素('#说明的开关按钮'),
                },

                执行一切准备工作 () {
                    this.界面元素集.开关按钮元素.onclick = this.$开关按钮元素事件处理程序_click.bind(this)
                },

                /**
                 * @this {T_应用顶部说明内容控制器}
                 * @param {PointerEvent} 事件
                 */
                $开关按钮元素事件处理程序_click (事件) {
                    const { 正文内容块元素 } = this.界面元素集

                    const { style } = 正文内容块元素

                    if (!style.display) {
                        style.display = 'none'
                    } else {
                        style.display = ''
                    }
                },
            }

            应用顶部说明内容控制器.执行一切准备工作 = 应用顶部说明内容控制器.执行一切准备工作.bind(应用顶部说明内容控制器)

            // -----------------------------------------------------------

            /**
             * @typedef {object} T_主图条目
             * @property {number} 命中概率宽度
             * @property {number} 命中概率起始值
             * @property {number} 命中概率结束值
             * @property {string} 图片文件名
             * @property {string} 图片源之地址
             * @property {string} 显示名称
             * @property {'神圣' | '高级' | '中级' | '普通'} 内容级别
             * @property {string} 样式表类名
             */

            /**
             * @typedef {Array<T_主图条目>} T_主图条目列表
             */

            /**
             * @typedef {object} T_主图条目候选列表控制器
             *
             * @property {string} 本实体在日志中的称谓
             *
             * @property {T_主图条目列表} 所有候选主图条目
             * @property {number} 所有候选主图条目的最大概率数字
             * @property {null | T_主图条目} 最末一次选中的主图条目
             *
             * @property {(this: T_主图条目候选列表控制器, argument0: {
             *     主图配置的列表: T_主图配置条目之列表;
             *     图片公共路径: string;
             * }) => void} 执行一切准备工作
             *
             * @property {(this: T_主图条目候选列表控制器, argument0: {
             *     主图配置的列表: T_主图配置条目之列表;
             *     图片公共路径: string;
             * }) => void} $构建候选条目之列表
             *
             * @property {(this: T_主图条目候选列表控制器) => T_主图条目} 随机选取一个条目
             * @property {(this: T_主图条目候选列表控制器, 递归深度: number) => T_主图条目} $随机选取一个条目
             */

            /** @type {T_主图条目候选列表控制器} */
            const 主图条目候选列表控制器 = {
                本实体在日志中的称谓: '主图条目候选列表控制器',

                所有候选主图条目: [],

                所有候选主图条目的最大概率数字: 0,

                最末一次选中的主图条目: null,

                /**
                 * @this {T_主图条目候选列表控制器}
                 * @param {object} argument0
                 * @param {T_主图配置条目之列表} argument0.主图配置的列表
                 * @param {string} argument0.图片公共路径
                 */
                执行一切准备工作 ({ 主图配置的列表, 图片公共路径 } = {}) {
                    this.$构建候选条目之列表 = this.$构建候选条目之列表.bind(this)
                    this.随机选取一个条目 = this.随机选取一个条目.bind(this)
                    this.$随机选取一个条目 = this.$随机选取一个条目.bind(this)

                    this.$构建候选条目之列表({ 主图配置的列表, 图片公共路径 })
                },

                /**
                 * @this {T_主图条目候选列表控制器}
                 * @param {object} argument0
                 * @param {T_主图配置条目之列表} argument0.主图配置的列表
                 * @param {string} argument0.图片公共路径
                 */
                $构建候选条目之列表 ({ 主图配置的列表, 图片公共路径 } = {}) {
                    this.所有候选主图条目 = []
                    this.所有候选主图条目的最大概率数字 = 0

                    if (!Array.isArray(主图配置的列表)) { return }
                    if (typeof 图片公共路径 !== 'string') {
                        图片公共路径 = ''
                    }

                    let 上一段的命中概率结束值 = 0

                    this.所有候选主图条目 = 主图配置的列表.map(配置条目 => {
                        const { 命中概率宽度, 图片文件名 } = 配置条目

                        const 本段的结束值 = 上一段的命中概率结束值 + 命中概率宽度
                        const 命中概率起始值 = 上一段的命中概率结束值
                        const 命中概率结束值 = 本段的结束值
                        上一段的命中概率结束值 = 本段的结束值

                        let 内容级别
                        if (命中概率宽度 <= 1) {
                            内容级别 = '神圣'
                        } else if (命中概率宽度 <= 5) {
                            内容级别 = '高级'
                        } else if (命中概率宽度 < 10) {
                            内容级别 = '中级'
                        } else {
                            内容级别 = '普通'
                        }

                        const 样式表类名 = 内容级别

                        const 显示名称 = 图片文件名.replace(/\..+$/, '').replace(/\s\d+\s/, ' ').replace(/穆逢春\s+/, '').replace(/\s+/g, ' · ')

                        const 图片源之地址 = `${图片公共路径}${图片文件名}`

                        /** @type {T_主图条目} */
                        const 主图条目 = {
                            命中概率宽度,
                            命中概率起始值,
                            命中概率结束值,
                            图片文件名,
                            图片源之地址,
                            显示名称,
                            内容级别,
                            样式表类名,
                        }

                        return 主图条目
                    })

                    this.所有候选主图条目的最大概率数字 = 上一段的命中概率结束值
                },

                /**
                 * @this {T_主图条目候选列表控制器}
                 * @returns {T_主图条目}
                 */
                随机选取一个条目 () {
                    return this.$随机选取一个条目(1)
                },

                /**
                 * @this {T_主图条目候选列表控制器}
                 * @this {number} 递归深度
                 * @returns {T_主图条目}
                 */
                $随机选取一个条目 (递归深度) {
                    const 随机整数 = Math.floor(Math.random() * this.所有候选主图条目的最大概率数字)
                    const 命中的条目 = this.所有候选主图条目.find(条目 => 条目.命中概率结束值 > 随机整数)
                    if (命中的条目 !== this.最末一次选中的主图条目 || 递归深度 >= 5) {
                        this.最末一次选中的主图条目 = 命中的条目
                        // console.debug(`${this.本实体在日志中的称谓}：\n\t 结束时的递归深度：`, 递归深度, '\n\t 命中的条目', 命中的条目)
                        return 命中的条目
                    } else {
                        return this.$随机选取一个条目(递归深度 + 1)
                    }
                },
            }

            主图条目候选列表控制器.执行一切准备工作 = 主图条目候选列表控制器.执行一切准备工作.bind(主图条目候选列表控制器)

            // -----------------------------------------------------------

            /**
             * @typedef {'点击了切换按钮' | '点击了主图本身'} T_中央主图控制器_主动请求切换主图的原因
             * @typedef {T_中央主图控制器_主动请求切换主图的原因 | '某缩略图列表删除了特定图片' | '某缩略图列表请求呈现特定图片'} T_中央主图控制器_主图变更原因
             * @typedef {{
             *     引发主图变动的缩略图列表控制器?: T_缩略图列表控制器;
             *     引发主图变动的缩略图条目?: T_缩略图条目;
             * }} T_中央主图控制器_主图变更原因的相关数据 其中，设计 `引发主图变动的缩略图列表控制器` 属性，原因是故意假定未来在历史列表之外还可能有其他列表。这是提前令代码复杂化的做法，作为训练，有意为之。
             *
             * @typedef {object} T_中央主图控制器_自定义事件之处理程序集
             *
             * @property {null | (
             *     this: T_中央主图控制器,
             *     主动请求切换主图的原因: T_中央主图控制器_主动请求切换主图的原因
             * ) => T_主图条目} 当请求外界给出新的主图条目时
             *
             * @property {null | (this: T_中央主图控制器, 事件: {
             *     已呈现的主图条目: T_主图条目;
             *     主图变更原因: T_中央主图控制器_主图变更原因;
             *     主图变更原因的相关数据?: T_中央主图控制器_主图变更原因的相关数据;
             * }) => void} 当已经切换至新的主图时
             */

            /**
             * @typedef {object} T_中央主图控制器
             *
             * @property {string} 本实体在日志中的称谓
             *
             * @property {object} 界面元素集
             * @property {HTMLButtonElement} 界面元素.主图切换按钮元素
             * @property {HTMLElement} 界面元素.主图内容块之根元素
             * @property {HTMLImageElement} 界面元素.主图元素
             * @property {HTMLElement} 界面元素.主图说明文字元素
             * @property {HTMLElement} 界面元素.主图内容之级别标记元素
             *
             * @property {null | T_主图条目} 呈现的主图条目
             *
             * @property {T_中央主图控制器_自定义事件之处理程序集} 自定义事件之处理程序集
             *
             * @property {(this: T_中央主图控制器, argument0: {
             *     自定义事件之处理程序集: T_中央主图控制器_自定义事件之处理程序集;
             * }) => void} 执行一切准备工作
             *
             * @property {(this: T_中央主图控制器, argument0: {
             *     欲呈现的主图条目?: T_主图条目;
             *     主图变更原因?: T_中央主图控制器_主图变更原因;
             *     主图变更原因的相关数据?: T_中央主图控制器_主图变更原因的相关数据;
             * }) => void} 变更主图
             *
             * @property {(
             *     this: T_中央主图控制器,
             *     主动请求切换主图的原因: T_中央主图控制器_主动请求切换主图的原因
             * ) => void} $主动请求切换主图
             *
             * @property {(this: T_中央主图控制器, 事件: PointerEvent) => any} $主图切换按钮元素事件处理程序_click
             * @property {(this: T_中央主图控制器, 事件: PointerEvent) => any} $主图图片元素事件处理程序_click
             */

            /** @type {T_中央主图控制器} */
            const 中央主图控制器 = {
                本实体在日志中的称谓: '中央主图控制器',

                界面元素集: {
                    主图切换按钮元素: 查找元素('#切换按钮'),
                    主图内容块之根元素: 查找元素('#主图内容块之根'),
                    主图元素: 查找元素('#主图'),
                    主图说明文字元素: 查找元素('#主图说明文字'),
                    主图内容之级别标记元素: 查找元素('#主图内容之级别标记'),
                },

                呈现的主图条目: null,

                自定义事件之处理程序集: {
                    当请求外界给出新的主图条目时: null,
                    当已经切换至新的主图时: null,
                },

                /**
                 * @this {T_中央主图控制器}
                 * @param {object} argument0
                 * @param {T_中央主图控制器_自定义事件之处理程序集} argument0.自定义事件之处理程序集
                 */
                执行一切准备工作 ({ 自定义事件之处理程序集 } = {}) {
                    if (自定义事件之处理程序集) {
                        const _自定义事件存放对象 = this.自定义事件之处理程序集

                        const {
                            当请求外界给出新的主图条目时,
                            当已经切换至新的主图时,
                        } = 自定义事件之处理程序集

                        if (typeof 当请求外界给出新的主图条目时 === 'function') {
                            _自定义事件存放对象.当请求外界给出新的主图条目时 = 当请求外界给出新的主图条目时.bind(this)
                        }

                        if (typeof 当已经切换至新的主图时 === 'function') {
                            _自定义事件存放对象.当已经切换至新的主图时 = 当已经切换至新的主图时.bind(this)
                        }
                    }

                    this.变更主图 = this.变更主图.bind(this)
                    this.$主动请求切换主图 = this.$主动请求切换主图.bind(this)
                    this.$主图切换按钮元素事件处理程序_click = this.$主图切换按钮元素事件处理程序_click.bind(this)
                    this.$主图图片元素事件处理程序_click = this.$主图图片元素事件处理程序_click.bind(this)

                    const {
                        主图切换按钮元素,
                        主图元素,
                    } = this.界面元素集

                    // 给【主图切换按钮元素】、【主图元素】分别添加点击功能，以随机切换【主图】。
                    主图切换按钮元素.onclick = this.$主图切换按钮元素事件处理程序_click
                    主图元素.onclick = this.$主图图片元素事件处理程序_click
                },

                /**
                 * @this {T_中央主图控制器}
                 * @param {object} argument0
                 * @param {?T_主图条目} argument0.欲呈现的主图条目
                 * @param {?T_中央主图控制器_主图变更原因} argument0.主图变更原因
                 * @param {?T_中央主图控制器_主图变更原因的相关数据} argument0.主图变更原因的相关数据
                 */
                变更主图 ({ 欲呈现的主图条目, 主图变更原因, 主图变更原因的相关数据 } = {}) {
                    const 主图内容块之根元素基础样式类名 = '主图内容块之根'

                    const {
                        主图切换按钮元素,
                        主图内容块之根元素,
                        主图元素,
                        主图说明文字元素,
                        主图内容之级别标记元素,
                    } = this.界面元素集

                    if (!欲呈现的主图条目) {
                        欲呈现的主图条目 = null

                        主图内容块之根元素.className = 主图内容块之根元素基础样式类名

                        主图元素.src = ''

                        主图说明文字元素.innerText = ''
                        主图说明文字元素.style.display = 'none'

                        主图内容之级别标记元素.innerText = ''
                        主图内容之级别标记元素.style.display = 'none'

                        主图切换按钮元素.innerText = '点击我，可显示图片'
                    } else {
                        const {
                            样式表类名,
                            图片源之地址,
                            显示名称,
                            内容级别,
                        } = 欲呈现的主图条目

                        主图内容块之根元素.className = [
                            主图内容块之根元素基础样式类名,
                            样式表类名,
                        ].join(' ')

                        主图元素.src = 图片源之地址

                        主图说明文字元素.innerText = 显示名称
                        主图说明文字元素.style.display = ''

                        主图内容之级别标记元素.innerText = 内容级别
                        主图内容之级别标记元素.style.display = ''

                        主图切换按钮元素.innerText = '点击我或点击图片，可改变图片'
                    }

                    this.呈现的主图条目 = 欲呈现的主图条目

                    const {
                        当已经切换至新的主图时,
                    } = this.自定义事件之处理程序集

                    if (typeof 当已经切换至新的主图时 === 'function') {
                        当已经切换至新的主图时({
                            已呈现的主图条目: 欲呈现的主图条目,
                            主图变更原因,
                            主图变更原因的相关数据,
                        })
                    }
                },

                /**
                 * @this {T_中央主图控制器}
                 * @param {T_中央主图控制器_主动请求切换主图的原因} 主动请求切换主图的原因
                 */
                $主动请求切换主图 (主动请求切换主图的原因) {
                    const {
                        当请求外界给出新的主图条目时,
                    } = this.自定义事件之处理程序集

                    /** @type {T_主图条目} */
                    let 欲呈现的主图条目
                    if (typeof 当请求外界给出新的主图条目时 === 'function') {
                        欲呈现的主图条目 = 当请求外界给出新的主图条目时(主动请求切换主图的原因)
                    }

                    if (欲呈现的主图条目) {
                        const 主图变更原因 = 主动请求切换主图的原因
                        this.变更主图({
                            欲呈现的主图条目,
                            主图变更原因,
                            主图变更原因的相关数据: {
                                引发主图变动的缩略图列表控制器: null,
                                引发主图变动的缩略图条目: null,
                            },
                        })
                    } else {
                        console.error('主动请求切换主图时，外界未能交付有效的主图条目。')
                    }
                },

                /**
                 * @this {T_中央主图控制器}
                 * @param {PointerEvent} 事件
                 */
                $主图切换按钮元素事件处理程序_click (事件) {
                    this.$主动请求切换主图('点击了切换按钮')
                },

                /**
                 * @this {T_中央主图控制器}
                 * @param {PointerEvent} 事件
                 */
                $主图图片元素事件处理程序_click (事件) {
                    this.$主动请求切换主图('点击了主图本身')
                },
            }

            中央主图控制器.执行一切准备工作 = 中央主图控制器.执行一切准备工作.bind(中央主图控制器)

            // -----------------------------------------------------------

            /**
             * @typedef {object} T_缩略图条目
             * @property {T_主图条目} 关联的主图条目
             * @property {HTMLLIElement} 界面根元素
             */

            /**
             * @typedef {Array<T_缩略图条目>} T_缩略图条目列表
             */

            /**
             * @typedef {(
             *     | '缩略图列表控制器自身主动标记'
             *     | '缩略图列表控制器自身主动删除原已标记的缩略图条目'
             *     | '外界通知该缩略图列表控制器某缩略图条目对应的图片已呈现'
             * )} T_缩略图列表控制器_引发标记该缩略图条目的原因
             */

            /**
             * @typedef {object} T_缩略图列表控制器_自定义事件之处理程序集
             *
             * @property {null | (this: T_缩略图列表控制器, argument0: {
             *     请求呈现对应图片的缩略图条目: T_缩略图条目;
             *     该条目被标记的原因: T_缩略图列表控制器_引发标记该缩略图条目的原因;
             * }) => void} 当某缩略图条目请求在别处呈现对应图片时
             *
             * @property {null | (
             *     this: T_缩略图列表控制器,
             *     已删除的缩略图条目: T_缩略图条目
             * ) => void} 当某缩略图条目删除时
             */

            /**
             * @typedef {object} T_缩略图列表控制器
             *
             * @property {string} 本实体在日志中的称谓
             *
             * @property {object} 界面元素集
             * @property {HTMLElement} 界面元素集.历史记录列表元素
             * @property {HTMLElement} 界面元素集.历史记录总数值元素
             *
             * @property {T_缩略图条目列表} 缩略图条目之列表
             * @property {number} 缩略图条目数量上限
             * @property {null | T_缩略图条目} 选中的缩略图条目
             * @property {null | T_缩略图条目} 别处呈现的图片对应的缩略图条目
             *
             * @property {T_缩略图列表控制器_自定义事件之处理程序集} 自定义事件之处理程序集
             *
             * @property {(this: T_缩略图列表控制器, argument0: {
             *     自定义事件之处理程序集: T_缩略图列表控制器_自定义事件之处理程序集;
             * }) => void} 执行一切准备工作
             *
             * @property {(this: T_缩略图列表控制器) => void} 更新界面中的历史记录总数值
             * @property {(this: T_缩略图列表控制器) => void} 确保缩略图条目总数不超越限度
             *
             * @property {(this: T_缩略图列表控制器, 关联的主图条目: T_主图条目) => null | T_缩略图条目} 根据主图条目创建对应的缩略图条目
             * @property {(this: T_缩略图列表控制器, 主图条目: T_主图条目) => HTMLLIElement} 根据给出的主图条目为其对应的缩略图条目创建一切元素
             *
             * @property {(this: T_缩略图列表控制器, 欲删除的缩略图条目?: T_缩略图条目) => void} 删除某缩略图条目
             * @property {(this: T_缩略图列表控制器, 所涉缩略图条目: T_缩略图条目) => void} $删除某缩略图条目关联的一切界面元素
             *
             * @property {(this: T_缩略图列表控制器, argument0: {
             *     所涉主图条目?: T_主图条目;
             *     应替换而非追加缩略图条目?: boolean;
             *     如果是追加缩略图条目则追加在列表末尾?: boolean;
             * }) => void} 为主图条目构建新的缩略图条目并将新缩略图添加到某旧条目之后或替换掉该旧条目 参数 `如果是追加缩略图条目则追加在列表末尾` 若为 false ，则在当前选中的缩略图条目之后插入新的缩略图条目。
             *
             * @property {(
             *     this: T_缩略图列表控制器,
             *     新缩略图条目?: T_缩略图条目,
             *     旧缩略图条目?: T_缩略图条目,
             *     应替换掉旧缩略图条目?: boolean
             * ) => void} $将新缩略图条目添加到某旧条目之后或替换掉该旧条目
             *
             * @property {(this: T_缩略图列表控制器, argument0: {
             *     欲标记的缩略图条目?: T_缩略图条目;
             *     引发标记该缩略图条目的原因?: T_缩略图列表控制器_引发标记该缩略图条目的原因;
             * }) => void} 将某缩略图条目标记为在别处呈现图片的对应缩略图
             *
             * @property {(this: T_缩略图列表控制器, 欲选中的缩略图条目?: T_缩略图条目, 缩略图选中标记变更之原因?: string) => void} $选中某缩略图条目
             *
             * @property {(this: T_缩略图列表控制器, 事件: PointerEvent) => any} $列表根元素事件代理程序_click
             */

            /** @type {T_缩略图列表控制器}  */
            const 历史记录列表控制器 = {
                本实体在日志中的称谓: '历史记录列表控制器',

                界面元素集: {
                    历史记录列表元素: 查找元素('#历史记录列表'),
                    历史记录总数值元素: 查找元素('#历史记录总数值'),
                },

                缩略图条目之列表: [],

                缩略图条目数量上限: 历史记录数量上限,

                选中的缩略图条目: null,
                别处呈现的图片对应的缩略图条目: null,

                自定义事件之处理程序集: {
                    当某缩略图条目请求在别处呈现对应图片时: null,
                    当某缩略图条目删除时: null,
                },

                /**
                 * @this {T_缩略图列表控制器}
                 * @param {object} argument0
                 * @param {T_缩略图列表控制器_自定义事件之处理程序集} argument0.自定义事件之处理程序集
                 */
                执行一切准备工作 ({ 自定义事件之处理程序集 } = {}) {
                    if (自定义事件之处理程序集) {
                        const _自定义事件存放对象 = this.自定义事件之处理程序集

                        const {
                            当某缩略图条目请求在别处呈现对应图片时,
                            当某缩略图条目删除时,
                        } = 自定义事件之处理程序集

                        if (typeof 当某缩略图条目请求在别处呈现对应图片时 === 'function') {
                            _自定义事件存放对象.当某缩略图条目请求在别处呈现对应图片时 = 当某缩略图条目请求在别处呈现对应图片时.bind(this)
                        }

                        if (typeof 当某缩略图条目删除时 === 'function') {
                            _自定义事件存放对象.当某缩略图条目删除时 = 当某缩略图条目删除时.bind(this)
                        }
                    }

                    this.更新界面中的历史记录总数值 = this.更新界面中的历史记录总数值.bind(this)
                    this.确保缩略图条目总数不超越限度 = this.确保缩略图条目总数不超越限度.bind(this)
                    this.根据主图条目创建对应的缩略图条目 = this.根据主图条目创建对应的缩略图条目.bind(this)
                    this.根据给出的主图条目为其对应的缩略图条目创建一切元素 = this.根据给出的主图条目为其对应的缩略图条目创建一切元素.bind(this)
                    this.删除某缩略图条目 = this.删除某缩略图条目.bind(this)
                    this.$删除某缩略图条目关联的一切界面元素 = this.$删除某缩略图条目关联的一切界面元素.bind(this)
                    this.为主图条目构建新的缩略图条目并将新缩略图添加到某旧条目之后或替换掉该旧条目 = this.为主图条目构建新的缩略图条目并将新缩略图添加到某旧条目之后或替换掉该旧条目.bind(this)
                    this.$将新缩略图条目添加到某旧条目之后或替换掉该旧条目 = this.$将新缩略图条目添加到某旧条目之后或替换掉该旧条目.bind(this)
                    this.将某缩略图条目标记为在别处呈现图片的对应缩略图 = this.将某缩略图条目标记为在别处呈现图片的对应缩略图.bind(this)
                    this.$选中某缩略图条目 = this.$选中某缩略图条目.bind(this)
                    this.$列表根元素事件代理程序_click = this.$列表根元素事件代理程序_click.bind(this)

                    const {
                        历史记录列表元素,
                    } = this.界面元素集

                    // 给【历史记录列表元素】添加点击功能，代理其子孙元素的点击事件。
                    历史记录列表元素.onclick = this.$列表根元素事件代理程序_click
                },

                /**
                 * @this {T_缩略图列表控制器}
                 */
                更新界面中的历史记录总数值 () {
                    this.界面元素集.历史记录总数值元素.innerText = this.缩略图条目之列表.length
                },

                /**
                 * @this {T_缩略图列表控制器}
                 */
                确保缩略图条目总数不超越限度 () {
                    const 缩略图条目之旧列表 = this.缩略图条目之列表
                    const 数量上限 = this.缩略图条目数量上限

                    const 目前的条目数量 = 缩略图条目之旧列表.length

                    if (目前的条目数量 > 数量上限) {
                        const 旧列表应截除的部分 = 缩略图条目之旧列表.slice(数量上限)
                        const 旧列表应保留的部分 = 缩略图条目之旧列表.slice(0, 数量上限)

                        旧列表应截除的部分.forEach(this.$删除某缩略图条目关联的一切界面元素)

                        this.缩略图条目之列表 = 旧列表应保留的部分
                    }
                },

                /**
                 * @this {T_缩略图列表控制器}
                 * @param {T_主图条目} 关联的主图条目
                 * @returns {null | T_缩略图条目}
                 */
                根据主图条目创建对应的缩略图条目 (关联的主图条目) {
                    if (!关联的主图条目) { return null }

                    const 界面根元素 = this.根据给出的主图条目为其对应的缩略图条目创建一切元素(关联的主图条目)
                    if (!界面根元素) { return null }

                    /** @type {T_缩略图条目} */
                    const 新的缩略图条目 = {
                        关联的主图条目,
                        界面根元素,
                    }

                    界面根元素.关联的缩略图条目 = 新的缩略图条目

                    return 新的缩略图条目
                },

                /**
                 * @this {T_缩略图列表控制器}
                 * @param {T_主图条目} 主图条目
                 */
                根据给出的主图条目为其对应的缩略图条目创建一切元素 (主图条目) {
                    if (!主图条目) {
                        throw new TypeError(`${this.本实体在日志中的称谓}：创建【缩略图条目】之【界面元素】时，未给出相关的【主图条目】作为依据。`)
                        // return null
                    }

                    const {
                        样式表类名,
                        图片源之地址,
                        内容级别,
                    } = 主图条目

                    const 根元素 = 创建元素('li')
                    根元素.className = [
                        '历史记录条目',
                        样式表类名,
                    ].join(' ')

                    const 中央容器元素 = 创建元素('span')
                    中央容器元素.className = '中央容器'

                    const 图像元素 = 创建元素('span')
                    图像元素.className = '图像'
                    图像元素.style.backgroundImage = `url('${图片源之地址}')`

                    const 内容级别标记元素 = 创建元素('sup')
                    内容级别标记元素.className = '内容之级别标记'
                    内容级别标记元素.innerText = 内容级别

                    const 删除按钮元素 = 创建元素('button')
                    删除按钮元素.className = '删除按钮'
                    删除按钮元素.innerText = '⨉'

                    中央容器元素.appendChild(删除按钮元素)
                    中央容器元素.appendChild(内容级别标记元素)
                    中央容器元素.appendChild(图像元素)

                    根元素.appendChild(中央容器元素)

                    return 根元素
                },

                /**
                 * @this {T_缩略图列表控制器}
                 * @param {?T_缩略图条目} 欲删除的缩略图条目
                 */
                删除某缩略图条目 (欲删除的缩略图条目) {
                    const 缩略图条目之旧列表 = this.缩略图条目之列表
                    const 与删除条目的列表编号 = 缩略图条目之旧列表.indexOf(欲删除的缩略图条目)
                    
                    const 欲删除的缩略图条目确实在旧列表中 = 与删除条目的列表编号 >= 0
                    if (!欲删除的缩略图条目确实在旧列表中) { return }

                    const 相邻的缩略图条目甲 = 缩略图条目之旧列表[与删除条目的列表编号 + 1]
                    const 相邻的缩略图条目乙 = 缩略图条目之旧列表[与删除条目的列表编号 - 1]

                    const 欲删除的缩略图条目恰为选中的条目 = 欲删除的缩略图条目 === this.选中的缩略图条目

                    this.缩略图条目之列表 = 缩略图条目之旧列表.filter(缩略图条目 => 缩略图条目 !== 欲删除的缩略图条目)
                    this.$删除某缩略图条目关联的一切界面元素(欲删除的缩略图条目)
                    this.更新界面中的历史记录总数值()

                    if (欲删除的缩略图条目 === this.别处呈现的图片对应的缩略图条目) {
                        this.将某缩略图条目标记为在别处呈现图片的对应缩略图({
                            欲标记的缩略图条目: null,
                            引发标记该缩略图条目的原因: '缩略图列表控制器自身主动删除原已标记的缩略图条目',
                        })
                    }

                    if (欲删除的缩略图条目恰为选中的条目) {
                        this.$选中某缩略图条目(null, '删除了该缩略图条目')
                    }

                    const 本事件之后续自定义事件之处理程序 = this.自定义事件之处理程序集.当某缩略图条目删除时
                    if (typeof 本事件之后续自定义事件之处理程序 === 'function') {
                        本事件之后续自定义事件之处理程序(欲删除的缩略图条目)
                    }

                    if (欲删除的缩略图条目恰为选中的条目) {
                        let 应自动选中该相邻条目
                        let 选中该相邻条目之原因
                        if (相邻的缩略图条目甲) {
                            应自动选中该相邻条目 = 相邻的缩略图条目甲
                            选中该相邻条目之原因 = '删除了该缩略图条目的相邻条目'
                        } else if (相邻的缩略图条目乙) {
                            应自动选中该相邻条目 = 相邻的缩略图条目乙
                            选中该相邻条目之原因 = '删除了该缩略图条目的相邻条目'
                        }

                        if (应自动选中该相邻条目) {
                            this.$选中某缩略图条目(应自动选中该相邻条目, 选中该相邻条目之原因)
                            this.将某缩略图条目标记为在别处呈现图片的对应缩略图({
                                欲标记的缩略图条目: 应自动选中该相邻条目,
                                引发标记该缩略图条目的原因: '缩略图列表控制器自身主动标记',
                            })
                        }
                    }
                },

                /**
                 * @this {T_缩略图列表控制器}
                 * @param {T_缩略图条目} 所涉缩略图条目
                 */
                $删除某缩略图条目关联的一切界面元素 (所涉缩略图条目) {
                    const 所涉根元素 = 所涉缩略图条目.界面根元素
                    所涉根元素.parentElement.removeChild(所涉根元素)
                },

                /**
                 * @this {T_缩略图列表控制器}
                 * @param {object} argument0
                 * @param {?T_主图条目} argument0.所涉主图条目
                 * @param {?boolean} argument0.应替换而非追加缩略图条目
                 * @param {?boolean} argument0.如果是追加缩略图条目则追加在列表末尾 否则在当前选中的缩略图条目之后插入新的缩略图条目
                 */
                为主图条目构建新的缩略图条目并将新缩略图添加到某旧条目之后或替换掉该旧条目 ({ 所涉主图条目, 应替换而非追加缩略图条目, 如果是追加缩略图条目则追加在列表末尾 } = {}) {
                    const 新缩略图条目 = this.根据主图条目创建对应的缩略图条目(所涉主图条目)

                    if (新缩略图条目) {
                        const { 缩略图条目之列表, 选中的缩略图条目 } = this
                        const 应替换掉旧缩略图条目 = !!选中的缩略图条目 && 应替换而非追加缩略图条目

                        let 旧缩略图条目 = 选中的缩略图条目
                        if (!应替换掉旧缩略图条目 && 如果是追加缩略图条目则追加在列表末尾) {
                            旧缩略图条目 = null
                        }

                        this.$将新缩略图条目添加到某旧条目之后或替换掉该旧条目(新缩略图条目, 旧缩略图条目, 应替换掉旧缩略图条目)
                    }
                },

                /**
                 * @this {T_缩略图列表控制器}
                 * @param {?T_缩略图条目} 新缩略图条目
                 * @param {?T_缩略图条目} 旧缩略图条目
                 * @param {?boolean} 应替换掉旧缩略图条目
                 */
                $将新缩略图条目添加到某旧条目之后或替换掉该旧条目 (新缩略图条目, 旧缩略图条目, 应替换掉旧缩略图条目) {
                    if (!新缩略图条目) { return }

                    const 缩略图条目之旧列表 = this.缩略图条目之列表
                    const { 历史记录列表元素 } = this.界面元素集

                    let 在列表中找到了旧纪录 = false

                    /** @type {T_缩略图条目列表} */
                    const 缩略图条目之新列表 = []

                    if (!旧缩略图条目) {
                        旧缩略图条目 = null
                        应替换掉旧缩略图条目 = false
                    }

                    缩略图条目之旧列表.forEach(缩略图条目 => {
                        if (缩略图条目 !== 旧缩略图条目) {
                            缩略图条目之新列表.push(缩略图条目)
                        } else {
                            在列表中找到了旧纪录 = true
                            缩略图条目之新列表.push(新缩略图条目)

                            const 旧元素 = 旧缩略图条目.界面根元素
                            const 新元素 = 新缩略图条目.界面根元素

                            历史记录列表元素.insertBefore(新元素, 旧元素)

                            if (应替换掉旧缩略图条目) {
                                this.$删除某缩略图条目关联的一切界面元素(缩略图条目)
                            } else {
                                缩略图条目之新列表.push(缩略图条目)
                            }
                        }
                    })

                    if (!在列表中找到了旧纪录) {
                        缩略图条目之新列表.unshift(新缩略图条目)

                        const 最末的缩略图条目 = 缩略图条目之旧列表[0]

                        /** @type {null | HTMLLIElement} */
                        let 旧元素 = null
                        if (最末的缩略图条目) {
                            旧元素 = 最末的缩略图条目.界面根元素
                        }

                        const 新元素 = 新缩略图条目.界面根元素

                        历史记录列表元素.insertBefore(新元素, 旧元素)
                    }

                    this.缩略图条目之列表 = 缩略图条目之新列表
                    this.确保缩略图条目总数不超越限度()
                    this.更新界面中的历史记录总数值()

                    const 应选中新添加的缩略图条目 = 在列表中找到了旧纪录
                    // const 应选中新添加的缩略图条目 = 在列表中找到了旧纪录 && this.选中的缩略图条目 === 旧缩略图条目 && 应替换掉旧缩略图条目
                    if (应选中新添加的缩略图条目) {
                        this.$选中某缩略图条目(新缩略图条目, '添加了新条目替换原本已选中的旧条目')
                    } else {
                        this.$选中某缩略图条目(null, '添加了新条目但不要求选中之')
                    }

                    this.将某缩略图条目标记为在别处呈现图片的对应缩略图({
                        欲标记的缩略图条目: 新缩略图条目,
                        引发标记该缩略图条目的原因: '外界通知该缩略图列表控制器某缩略图条目对应的图片已呈现',
                    })
                },

                /**
                 * @this {T_缩略图列表控制器}
                 * @param {?object} argument0
                 * @param {?T_缩略图条目} argument0.欲标记的缩略图条目
                 * @param {?T_缩略图列表控制器_引发标记该缩略图条目的原因} argument0.引发标记该缩略图条目的原因
                 */
                将某缩略图条目标记为在别处呈现图片的对应缩略图 ({ 欲标记的缩略图条目, 引发标记该缩略图条目的原因 } = {}) {
                    // console.debug(`${this.本实体在日志中的称谓}：将某缩略图条目标记为在别处呈现图片的对应缩略图`, '\n\t 原因：', 引发标记该缩略图条目的原因, '\n\t 缩略图：', 欲标记的缩略图条目)

                    let 应标记的缩略图条目 = null

                    const 样式表特征类名 = '对应图片已在别处呈现'

                    this.缩略图条目之列表.forEach(缩略图条目 => {
                        const { 界面根元素 } = 缩略图条目

                        if (!应标记的缩略图条目 && 缩略图条目 === 欲标记的缩略图条目) {
                            if (!界面根元素.classList.contains(样式表特征类名)) {
                                界面根元素.classList.add(样式表特征类名)
                            }
                            应标记的缩略图条目 = 欲标记的缩略图条目
                        } else {
                            if (界面根元素.classList.contains(样式表特征类名)) {
                                界面根元素.classList.remove(样式表特征类名)
                            }
                        }
                    })

                    this.别处呈现的图片对应的缩略图条目 = 应标记的缩略图条目

                    const 本事件之后续自定义事件之处理程序 = this.自定义事件之处理程序集.当某缩略图条目请求在别处呈现对应图片时
                    if (typeof 本事件之后续自定义事件之处理程序 === 'function') {
                        本事件之后续自定义事件之处理程序({
                            请求呈现对应图片的缩略图条目: 应标记的缩略图条目,
                            该条目被标记的原因: 引发标记该缩略图条目的原因,
                        })
                    }
                },

                /**
                 * @this {T_缩略图列表控制器}
                 * @param {?T_缩略图条目} 欲选中的缩略图条目
                 * @param {?string} 缩略图选中标记变更之原因
                 */
                $选中某缩略图条目 (欲选中的缩略图条目, 缩略图选中标记变更之原因) {
                    if (!!欲选中的缩略图条目 && 欲选中的缩略图条目 === this.选中的缩略图条目) {
                        欲选中的缩略图条目 = null
                    }

                    // console.debug(`${this.本实体在日志中的称谓}：$选中某缩略图条目`, '\n\t 原因：', 缩略图选中标记变更之原因, '\n\t 缩略图：', 欲选中的缩略图条目)

                    let 将选中的缩略图条目 = null

                    const 样式表特征类名 = '已选中'

                    this.缩略图条目之列表.forEach(缩略图条目 => {
                        const { 界面根元素 } = 缩略图条目

                        if (!将选中的缩略图条目 && 缩略图条目 === 欲选中的缩略图条目) {
                            if (!界面根元素.classList.contains(样式表特征类名)) {
                                界面根元素.classList.add(样式表特征类名)
                            }
                            将选中的缩略图条目 = 欲选中的缩略图条目
                        } else {
                            if (界面根元素.classList.contains(样式表特征类名)) {
                                界面根元素.classList.remove(样式表特征类名)
                            }
                        }
                    })

                    this.选中的缩略图条目 = 将选中的缩略图条目
                },

                /**
                 * @this {T_缩略图列表控制器}
                 * @param {PointerEvent} 事件
                 */
                $列表根元素事件代理程序_click (事件) {
                    /** @type {Element} */
                    const 点击的最内层元素 = 事件.target

                    let 点击的是某缩略图的删除按钮 = false
                    if (点击的最内层元素.classList.contains('删除按钮')) {
                        点击的是某缩略图的删除按钮 = true
                    }

                    let 点击的列表条目元素 = 点击的最内层元素
                    let 点击的列表条目元素之标签名 = 点击的列表条目元素.tagName.toLowerCase()
                    while (![ 'ol', 'li' ].includes(点击的列表条目元素之标签名)) {
                        点击的列表条目元素 = 点击的列表条目元素.parentElement
                        点击的列表条目元素之标签名 = 点击的列表条目元素.tagName.toLowerCase()
                    }

                    // console.debug(`${this.本实体在日志中的称谓}：点击的列表条目元素`, 点击的列表条目元素之标签名, 点击的列表条目元素)

                    if (点击的列表条目元素之标签名 === 'li') {
                        /** @type {T_缩略图条目} */
                        const 所涉缩略图条目 = 点击的列表条目元素.关联的缩略图条目

                        if (点击的是某缩略图的删除按钮) {
                            this.删除某缩略图条目(所涉缩略图条目)
                            事件.stopPropagation()
                        } else {
                            this.$选中某缩略图条目(所涉缩略图条目, '列表条目被点击')
                            this.将某缩略图条目标记为在别处呈现图片的对应缩略图({
                                欲标记的缩略图条目: 所涉缩略图条目,
                                引发标记该缩略图条目的原因: '缩略图列表控制器自身主动标记',
                            })
                        }
                    }
                },
            }

            历史记录列表控制器.执行一切准备工作 = 历史记录列表控制器.执行一切准备工作.bind(历史记录列表控制器)

            // -------- 构建本应用之根 ---------------------------------

            /**
             * @typedef {object} T_端端的应用
             *
             * @property {object} 部件
             * @property {T_应用顶部说明内容控制器} 部件.应用顶部说明内容控制器
             * @property {T_主图条目候选列表控制器} 部件.主图条目候选列表控制器
             * @property {T_中央主图控制器} 部件.中央主图控制器
             * @property {T_缩略图列表控制器} 部件.历史记录列表控制器
             *
             * @property {object} 数据
             * @property {T_主图配置条目之列表} 数据.所有主图配置的列表
             * @property {string} 数据.图片公共路径
             *
             * @property {(this: T_端端的应用) => void} 执行一切准备工作
             * @property {(this: T_端端的应用) => void} 开始运行
             */

            /**
             * @global
             * @type {T_端端的应用}
             */
            const 本应用 = {
                部件: {
                    应用顶部说明内容控制器,
                    主图条目候选列表控制器,
                    中央主图控制器,
                    历史记录列表控制器,
                },

                数据: {
                    所有主图配置的列表,
                    图片公共路径,
                },

                执行一切准备工作 () {
                    console.log('应用根：准备工作……')

                    this.开始运行 = this.开始运行.bind(this)

                    const {
                        所有主图配置的列表,
                        图片公共路径,
                    } = this.数据

                    const {
                        应用顶部说明内容控制器,
                        主图条目候选列表控制器,
                        中央主图控制器,
                        历史记录列表控制器,
                    } = this.部件

                    // -------- 逐一准备各部件 ---------------------------------

                    应用顶部说明内容控制器.执行一切准备工作()

                    主图条目候选列表控制器.执行一切准备工作({
                        主图配置的列表: 所有主图配置的列表,
                        图片公共路径,
                    })

                    中央主图控制器.执行一切准备工作({
                        自定义事件之处理程序集: {
                            当请求外界给出新的主图条目时 (主动请求切换主图的原因) {
                                // console.debug(`${this.本实体在日志中的称谓}：当请求外界给出新的主图条目时，原因：`, 主动请求切换主图的原因)
                                return 主图条目候选列表控制器.随机选取一个条目()
                            },

                            当已经切换至新的主图时 ({ 已呈现的主图条目, 主图变更原因, 主图变更原因的相关数据 }) {
                                if (已呈现的主图条目) {
                                    console.log(`${this.本实体在日志中的称谓}：主图已切换至 《${已呈现的主图条目.显示名称}》。`)
                                } else {
                                    console.log(`${this.本实体在日志中的称谓}：主图已清除。`)
                                }
                                // console.debug('\t 主图变更原因：', 主图变更原因, '\n\t 主图变更原因的相关数据', 主图变更原因的相关数据)

                                let 引发主图变动的缩略图列表并非历史记录列表 = true

                                if (主图变更原因的相关数据) {
                                    const {
                                        引发主图变动的缩略图列表控制器,
                                        引发主图变动的缩略图条目,
                                    } = 主图变更原因的相关数据

                                    引发主图变动的缩略图列表并非历史记录列表 = 引发主图变动的缩略图列表控制器 !== 历史记录列表控制器

                                    // if (引发主图变动的缩略图列表控制器 && 引发主图变动的缩略图列表控制器 !== 历史记录列表控制器 && 引发主图变动的缩略图条目) {
                                    //     引发主图变动的缩略图列表控制器.将某缩略图条目标记为在别处呈现图片的对应缩略图({
                                    //         欲标记的缩略图条目: 引发主图变动的缩略图条目,
                                    //         引发标记该缩略图条目的原因: '外界通知该缩略图列表控制器某缩略图条目对应的图片已呈现',
                                    //     })
                                    // }
                                }

                                if (引发主图变动的缩略图列表并非历史记录列表) {
                                    const 应替换而非追加缩略图条目 = ![
                                        '点击了切换按钮',
                                    ].includes(主图变更原因)

                                    const 如果是追加缩略图条目则追加在列表末尾 = false
                                    // const 如果是追加缩略图条目则追加在列表末尾 = [
                                    //     '点击了切换按钮',
                                    // ].includes(主图变更原因)

                                    历史记录列表控制器.为主图条目构建新的缩略图条目并将新缩略图添加到某旧条目之后或替换掉该旧条目({
                                        所涉主图条目: 已呈现的主图条目,
                                        应替换而非追加缩略图条目,
                                        如果是追加缩略图条目则追加在列表末尾,
                                    })
                                }
                            },
                        },
                    })

                    历史记录列表控制器.执行一切准备工作({
                        自定义事件之处理程序集: {
                            当某缩略图条目删除时 (已删除的缩略图条目) {
                                if (已删除的缩略图条目.关联的主图条目 === 中央主图控制器.呈现的主图条目) {
                                    中央主图控制器.变更主图({
                                        欲呈现的主图条目: null,
                                        主图变更原因: '某缩略图列表删除了特定图片',
                                        主图变更原因的相关数据: null,
                                    })
                                }
                            },

                            当某缩略图条目请求在别处呈现对应图片时 ({ 请求呈现对应图片的缩略图条目, 该条目被标记的原因 }) {
                                if (请求呈现对应图片的缩略图条目 && 该条目被标记的原因 !== '外界通知该缩略图列表控制器某缩略图条目对应的图片已呈现') {
                                    中央主图控制器.变更主图({
                                        欲呈现的主图条目: 请求呈现对应图片的缩略图条目.关联的主图条目,
                                        主图变更原因: '某缩略图列表请求呈现特定图片',
                                        主图变更原因的相关数据: {
                                            引发主图变动的缩略图列表控制器: 历史记录列表控制器,
                                            引发主图变动的缩略图条目: 请求呈现对应图片的缩略图条目,
                                        },
                                    })
                                }
                            },
                        },
                    })
                },

                开始运行 () {
                    this.执行一切准备工作()

                    console.log('应用根：现在开始运行。')

                    // const {
                    //     主图条目候选列表控制器,
                    //     历史记录列表控制器,
                    // } = this.部件

                    // const 历史记录列表控制器所有初始条目应关联的主图条目 = [
                    //     主图条目候选列表控制器.随机选取一个条目(),
                    //     主图条目候选列表控制器.随机选取一个条目(),
                    //     主图条目候选列表控制器.随机选取一个条目(),
                    //     主图条目候选列表控制器.随机选取一个条目(),
                    //     主图条目候选列表控制器.随机选取一个条目(),
                    // ]

                    // 历史记录列表控制器所有初始条目应关联的主图条目.forEach(主图条目 => {
                    //     历史记录列表控制器.为主图条目构建新的缩略图条目并将新缩略图添加到某旧条目之后或替换掉该旧条目({
                    //         所涉主图条目: 主图条目,
                    //         应替换而非追加缩略图条目: false,
                    //         如果是追加缩略图条目则追加在列表末尾: true,
                    //     })
                    // })
                },
            }

            本应用.执行一切准备工作 = 本应用.执行一切准备工作.bind(本应用)

            // -------- 对外发布本应用 ---------------------------------

            return 本应用
        })()

        window.端端的应用.开始运行()
    </script>
</body>
</html>
